<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>Backbone.LinkedCollection by hongymagic</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>Backbone.LinkedCollection</h1>
          <h2>Backbone.js plugin to make Backbone.Collection smarter. Consumes Link field (RFC 5988) in the HTTP Response header to enable Web Linking between partial list resources.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/hongymagic/Backbone.LinkedCollection/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/hongymagic/Backbone.LinkedCollection/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/hongymagic/Backbone.LinkedCollection" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h1>Backbone.LinkedCollection</h1>

<p>Backbone.js plugin to make Backbone.Collection smarter. Consumes Link field
(<a href="http://tools.ietf.org/html/rfc5988#page-6">RFC 5988</a>) in the HTTP Response
header to enable Web Linking between sections of list resources.</p>

<h2>What do you mean?</h2>

<p>Web Linking is a technique used to describe relationships between two or more
resources on the web. If you have used:</p>

<pre><code>&lt;link href="http://cdn.domain.com/css/bootstrap.css" rel="stylesheet"&gt;
</code></pre>

<p>then you are familiar with web linking. What it is describing is that the
HTML page you're viewing has a related resource of type <code>stylesheet</code> at the
provided <code>href</code>.</p>

<h2>And what's does this have to do with Backbone.Collection?</h2>

<p>Nothing. But we can experiment with it to come up with a set of conventions
that make our Backbone.js collections a little smarter.</p>

<h2>How?</h2>

<p>Imagine the following links:</p>

<pre><code>&lt;link href="http://api.com/contacts" rel="first"&gt;
&lt;link href="http://api.com/contacts?page=2" rel="prev"&gt;
&lt;link href="http://api.com/contacts?page=3" rel="next"&gt;
&lt;link href="http://api.com/contacts?page=23445" rel="last"&gt;
</code></pre>

<p>What RFC 5988 allows is to use the same semantics in the HTTP
response header. So, provided that you call a list resource within some API, it
can provide you with how to obtain other portions of the same list resource.</p>

<p>Take a look at this request to <a href="http://developer.github.com/v3/gists/">Github Gists API</a>:</p>

<pre><code>$ curl -I https://api.github.com/gists/public
HTTP/1.1 200 OK
Link: &lt;https://api.github.com/gists/public?page=2&gt;; rel="next", &lt;https://api.github.com/gists/public?page=23914&gt;; rel="last"
</code></pre>

<p>See that? It means from 1 initial request, we now know what related resources
there are for this particular list resource. Therefore by taking advantage of
this information, we can formulate a smarter Backbone.Collection which I have
named Backbone.LinkedCollection.</p>

<h2>So what's new?</h2>

<p>In Backbone.LinkedCollection, there are 4 new methods:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">gists</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">LinkedCollection</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">'https://api.github.com/gists/public'</span><span class="p">,</span>
    <span class="nx">model</span><span class="o">:</span> <span class="nx">Demo</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">Gist</span>
<span class="p">});</span>

<span class="c1">// Get public gists</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>

<span class="c1">// All of the methods below have the same paramter signature as `fetch`</span>

<span class="c1">// Go to the first page</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span>

<span class="c1">// Get the previous set</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">prev</span><span class="p">();</span>

<span class="c1">// Get the next set</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>

<span class="c1">// Go to the last page</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">last</span><span class="p">();</span>
</pre>
</div>


<p>A simple demo is here: <a href="http://jsfiddle.net/davidhong/gAyAx/show/">http://jsfiddle.net/davidhong/gAyAx/show/</a></p>

<h2>Issues &amp; Resolutions</h2>

<h3>It is not a paging replacement</h3>

<p>Whilst HTTP Link field can contain more links than the 4 mentioned above,
it is not practical to include all pages. Thus, this should not be a replacement
for paged lists. Instead this could be useful for sequential lists such as
Twitter streams.</p>

<h3>PEG.js based HTTP Link field parser</h3>

<p>Is too big. A simple <code>page</code> and <code>per_page</code> implementation would be more ideal
if you're looking for something small. One main advantage of HTTP Link field is
that resource end-point is absolute as it is given to us by the server.</p>

<h3>No support for bootstrapping of models</h3>

<p>Since this is based HTTP Link field, at least one response is required to find
out about linked resources. Ideally, a collection should have an option to be
bootstrapped instead of fetching on start-up.</p>

<h3>Many more</h3>

<p>As mentioned earlier, this is an experiement.</p>

<h2>Further notes</h2>

<p>I think this idea could be useful on Backbone.Model as well. HTTP Link field is
not limited to list resources, but can extend to cater for different resources.</p>

<h2>TODO</h2>

<ol>
<li>Migrate the sources from jsbin/jsfiddle/gist/wherever</li>
<li>Write some tests</li>
<li>Fix code</li>
<li>Tasks</li>
</ol>
        </section>

        <footer>
          Backbone.LinkedCollection is maintained by <a href="https://github.com/hongymagic">hongymagic</a><br>
          This page was generated by <a href="http://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="http://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>