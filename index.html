<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Backbone.LinkedCollection by hongymagic</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1 class="header">Backbone.LinkedCollection</h1>
        <p class="header">Backbone.js plugin to make Backbone.Collection smarter. Consumes Link field (RFC 5988) in the HTTP Response header to enable Web Linking between partial list resources.</p>

        <ul>
          <li class="download"><a class="buttons" href="https://github.com/hongymagic/Backbone.LinkedCollection/zipball/master">Download ZIP</a></li>
          <li class="download"><a class="buttons" href="https://github.com/hongymagic/Backbone.LinkedCollection/tarball/master">Download TAR</a></li>
          <li><a class="buttons github" href="https://github.com/hongymagic/Backbone.LinkedCollection">View On GitHub</a></li>
        </ul>

        <p class="header">This project is maintained by <a class="header name" href="https://github.com/hongymagic">hongymagic</a></p>


      </header>
      <section>
        <h1>Backbone.LinkedCollection</h1>

<p>Backbone.js plugin to make Backbone.Collection smarter. Consumes Link field
(<a href="http://tools.ietf.org/html/rfc5988#page-6">RFC 5988</a>) in the HTTP Response
header to enable Web Linking between sections of list resources.</p>

<h2>What do you mean?</h2>

<p>Web Linking is a technique used to describe relationships between two or more
resources on the web. If you have used:</p>

<pre><code>&lt;link href="http://cdn.domain.com/css/bootstrap.css" rel="stylesheet"&gt;
</code></pre>

<p>then you are familiar with web linking. What it is describing is that the
HTML page you're viewing has a related resource of type <code>stylesheet</code> at the
provided <code>href</code>.</p>

<h2>And what's does this have to do with Backbone.Collection?</h2>

<p>Nothing. But we can experiment with it to come up with a set of conventions
that make our Backbone.js collections a little smarter.</p>

<h2>How?</h2>

<p>Imagine the following links:</p>

<pre><code>&lt;link href="http://api.com/contacts" rel="first"&gt;
&lt;link href="http://api.com/contacts?page=2" rel="prev"&gt;
&lt;link href="http://api.com/contacts?page=3" rel="next"&gt;
&lt;link href="http://api.com/contacts?page=23445" rel="last"&gt;
</code></pre>

<p>What RFC 5988 allows is to use the same semantics in the HTTP
response header. So, provided that you call a list resource within some API, it
can provide you with how to obtain other portions of the same list resource.</p>

<p>Take a look at this request to <a href="http://developer.github.com/v3/gists/">Github Gists API</a>:</p>

<pre><code>$ curl -I https://api.github.com/gists/public
HTTP/1.1 200 OK
Link: &lt;https://api.github.com/gists/public?page=2&gt;; rel="next", &lt;https://api.github.com/gists/public?page=23914&gt;; rel="last"
</code></pre>

<p>See that? It means from 1 initial request, we now know what related resources
there are for this particular list resource. Therefore by taking advantage of
this information, we can formulate a smarter Backbone.Collection which I have
named Backbone.LinkedCollection.</p>

<h2>So what's new?</h2>

<p>In Backbone.LinkedCollection, there are 4 new methods:</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">gists</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">LinkedCollection</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">'https://api.github.com/gists/public'</span><span class="p">,</span>
    <span class="nx">model</span><span class="o">:</span> <span class="nx">Demo</span><span class="p">.</span><span class="nx">Models</span><span class="p">.</span><span class="nx">Gist</span>
<span class="p">});</span>

<span class="c1">// Get public gists</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">fetch</span><span class="p">();</span>

<span class="c1">// All of the methods below have the same paramter signature as `fetch`</span>

<span class="c1">// Go to the first page</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">first</span><span class="p">();</span>

<span class="c1">// Get the previous set</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">prev</span><span class="p">();</span>

<span class="c1">// Get the next set</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>

<span class="c1">// Go to the last page</span>
<span class="nx">gists</span><span class="p">.</span><span class="nx">last</span><span class="p">();</span>
</pre></div>

<p>A simple demo is here: <a href="http://jsfiddle.net/davidhong/gAyAx/">http://jsfiddle.net/davidhong/gAyAx/</a> (CoffeeScript: <a href="http://jsfiddle.net/davidhong/m2jS2/">http://jsfiddle.net/davidhong/m2jS2/</a>)</p>

<h2>Issues &amp; Resolutions</h2>

<h3>It is not a paging replacement</h3>

<p>Whilst HTTP Link field can contain more links than the 4 mentioned above,
it is not practical to include all pages. Thus, this should not be a replacement
for paged lists. Instead this could be useful for sequential lists such as
Twitter streams.</p>

<h3>PEG.js based HTTP Link field parser</h3>

<p>Is too big. A simple <code>page</code> and <code>per_page</code> implementation would be more ideal
if you're looking for something small. One main advantage of HTTP Link field is
that resource end-point is absolute as it is given to us by the server.</p>

<h3>No support for bootstrapping of models</h3>

<p>Since this is based HTTP Link field, at least one response is required to find
out about linked resources. Ideally, a collection should have an option to be
bootstrapped instead of fetching on start-up.</p>

<h3>Many more</h3>

<p>As mentioned earlier, this is an experiement.</p>

<h2>Further notes</h2>

<p>I think this idea could be useful on Backbone.Model as well. HTTP Link field is
not limited to list resources, but can extend to cater for different resources.</p>

<h2>TODO</h2>

<ol>
<li><del>Migrate the sources from jsbin/jsfiddle/gist/wherever</del></li>
<li>Write some tests</li>
<li><del>Fix code</del></li>
<li><del>Tasks</del></li>
</ol><h2>Tags</h2>

<p>Backbone.js, LinkedCollection, Linked, Collection, TFC5988</p>
      </section>
      <footer>
        <p><small>Hosted on <a href="https://pages.github.com">GitHub Pages</a> using the Dinky theme</small></p>
      </footer>
    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
		
  </body>
</html>